{"version":3,"names":["_fsExtra","data","require","_lazyVal","path","_interopRequireWildcard","_readConfigFile","_webpack","_dll","_vue","_util","_BaseTarget","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","MiniCssExtractPlugin","BaseRendererTarget","BaseTarget","constructor","configureRules","configurator","extensions","push","miniLoaders","loader","options","modules","cssHotLoader","isProduction","concat","entryFiles","unshift","rules","test","use","configureFileLoader","hasDevDependency","hasDependency","configureVueRenderer","configurePlugins","debug","plugins","filename","type","exports","RendererTarget","customTemplateFile","join","projectDir","rendererTemplate","HtmlWebpackPlugin","nodeModulePath","resolve","template","statOrNull","readFile","encoding","getDefaultIndexTemplate","generateIndexFile","minify","nodeModules","DefinePlugin","__static","staticSourceDirectory","contentBase","commonDistDirectory","config","devServer","host","process","env","ELECTRON_WEBPACK_WDS_HOST","port","ELECTRON_WEBPACK_WDS_PORT","hot","overlay","computeTitle","titleFromOptions","electronWebpackConfiguration","title","metadata","productName","electronBuilderConfig","getConfig","packageKey","configFilename","packageMetadata","Lazy","Promise","result","name","assets","getDllAssets","scripts","css","asset","endsWith","filePath","html","replace","length","outputFile"],"sources":["../../src/targets/RendererTarget.ts"],"sourcesContent":["import { outputFile, readFile } from \"fs-extra\"\r\nimport { Lazy } from \"lazy-val\"\r\nimport * as path from \"path\"\r\nimport { getConfig } from \"read-config-file\"\r\nimport { DefinePlugin } from \"webpack\"\r\nimport { getDllAssets } from \"../configurators/dll\"\r\nimport { configureVueRenderer } from \"../configurators/vue/vue\"\r\nimport { WebpackConfigurator } from \"../main\"\r\nimport { statOrNull } from \"../util\"\r\nimport { BaseTarget, configureFileLoader } from \"./BaseTarget\"\r\n\r\nconst MiniCssExtractPlugin = require(\"mini-css-extract-plugin\")\r\n\r\nexport class BaseRendererTarget extends BaseTarget {\r\n  constructor() {\r\n    super()\r\n  }\r\n\r\n  configureRules(configurator: WebpackConfigurator): void {\r\n    super.configureRules(configurator)\r\n\r\n    configurator.extensions.push(\".css\")\r\n\r\n    const miniLoaders = [MiniCssExtractPlugin.loader, { loader: \"css-loader\", options: { modules: \"global\" } }]\r\n    const cssHotLoader = configurator.isProduction ? miniLoaders : [\"css-hot-loader\"].concat(miniLoaders)\r\n    if (!configurator.isProduction) {\r\n      // https://github.com/shepherdwind/css-hot-loader/issues/37\r\n      configurator.entryFiles.unshift(\"css-hot-loader/hotModuleReplacement\")\r\n    }\r\n\r\n    configurator.rules.push(\r\n      {\r\n        test: /\\.css$/,\r\n        use: cssHotLoader,\r\n      },\r\n      {\r\n        test: /\\.less$/,\r\n        use: cssHotLoader.concat(\"less-loader\"),\r\n      },\r\n      {\r\n        test: /\\.s([ac])ss$/,\r\n        use: cssHotLoader.concat(\"sass-loader\"),\r\n      },\r\n      {\r\n        test: /\\.(png|jpe?g|gif)(\\?.*)?$/,\r\n        use: {\r\n          loader: \"url-loader\",\r\n          options: configureFileLoader(\"imgs\")\r\n        }\r\n      },\r\n      {\r\n        test: /\\.svg$/,\r\n        use: [\r\n          {\r\n            loader: '@svgr/webpack',\r\n          },\r\n          {\r\n            loader: \"url-loader\",\r\n            options: configureFileLoader(\"imgs\")\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        test: /\\.(mp4|webm|ogg|mp3|wav|flac|aac)(\\?.*)?$/,\r\n        loader: \"url-loader\",\r\n        options: configureFileLoader(\"media\"),\r\n      },\r\n      {\r\n        test: /\\.(woff2?|eot|ttf|otf)(\\?.*)?$/,\r\n        use: {\r\n          loader: \"url-loader\",\r\n          options: configureFileLoader(\"fonts\")\r\n        }\r\n      },\r\n    )\r\n\r\n    if (configurator.hasDevDependency(\"ejs-html-loader\")) {\r\n      configurator.rules.push({\r\n        test: /\\.ejs$/,\r\n        loader: \"ejs-html-loader\",\r\n      })\r\n    }\r\n\r\n    if (configurator.hasDependency(\"vue\")) {\r\n      configureVueRenderer(configurator)\r\n    }\r\n    else {\r\n      configurator.rules.push({\r\n        test: /\\.(html)$/,\r\n        use: {\r\n          loader: \"html-loader\",\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  async configurePlugins(configurator: WebpackConfigurator): Promise<void> {\r\n    configurator.debug(\"Add ExtractTextPlugin plugin\")\r\n    configurator.plugins.push(new MiniCssExtractPlugin({filename: `${configurator.type === \"renderer-dll\" ? \"vendor\" : \"styles\"}.css`}))\r\n\r\n    await BaseTarget.prototype.configurePlugins.call(this, configurator)\r\n  }\r\n}\r\n\r\nexport class RendererTarget extends BaseRendererTarget {\r\n  constructor() {\r\n    super()\r\n  }\r\n\r\n  async configurePlugins(configurator: WebpackConfigurator): Promise<void> {\r\n    // not configurable for now, as in the electron-vue\r\n    const customTemplateFile = path.join(configurator.projectDir, configurator.rendererTemplate)\r\n    const HtmlWebpackPlugin = require(\"html-webpack-plugin\")\r\n    const nodeModulePath = configurator.isProduction ? null : path.resolve(require.resolve(\"electron\"), \"..\", \"..\")\r\n\r\n    let template\r\n    if (await statOrNull(customTemplateFile)) {\r\n      template = await readFile(customTemplateFile, {encoding: \"utf8\"})\r\n    }\r\n    else {\r\n      template = getDefaultIndexTemplate()\r\n    }\r\n\r\n    configurator.plugins.push(new HtmlWebpackPlugin({\r\n      filename: \"index.html\",\r\n      template: await generateIndexFile(configurator, nodeModulePath, template),\r\n      minify: false,\r\n      nodeModules: nodeModulePath\r\n    }))\r\n\r\n    if (configurator.isProduction) {\r\n      configurator.plugins.push(new DefinePlugin({\r\n        __static: `process.resourcesPath + \"/${configurator.staticSourceDirectory}\"`\r\n      }))\r\n    }\r\n    else {\r\n      const contentBase = [path.join(configurator.projectDir, configurator.staticSourceDirectory), path.join(configurator.commonDistDirectory, \"renderer-dll\")];\r\n      (configurator.config as any).devServer = {\r\n        contentBase,\r\n        host: process.env.ELECTRON_WEBPACK_WDS_HOST || \"localhost\",\r\n        port: process.env.ELECTRON_WEBPACK_WDS_PORT || 9080,\r\n        hot: true,\r\n        overlay: true,\r\n      }\r\n    }\r\n\r\n    await BaseRendererTarget.prototype.configurePlugins.call(this, configurator)\r\n  }\r\n}\r\n\r\nasync function computeTitle(configurator: WebpackConfigurator): Promise<string | null | undefined> {\r\n  const titleFromOptions = configurator.electronWebpackConfiguration.title\r\n  if (titleFromOptions == null || titleFromOptions === false) {\r\n    return null\r\n  }\r\n\r\n  if (titleFromOptions !== true) {\r\n    return titleFromOptions\r\n  }\r\n\r\n  let title: string | null | undefined = (configurator.metadata as any).productName\r\n  if (title == null) {\r\n    const electronBuilderConfig = await getConfig<any>({\r\n      packageKey: \"build\",\r\n      configFilename: \"electron-builder\",\r\n      projectDir: configurator.projectDir,\r\n      packageMetadata: new Lazy(() => Promise.resolve(configurator.metadata))\r\n    })\r\n    if (electronBuilderConfig != null) {\r\n      title = electronBuilderConfig.result.productName\r\n    }\r\n  }\r\n\r\n  if (title == null) {\r\n    title = configurator.metadata.name\r\n  }\r\n  return title\r\n}\r\n\r\nfunction getDefaultIndexTemplate() {\r\n  return `<!DOCTYPE html>\r\n    <html>\r\n      <head>\r\n        <meta charset=\"utf-8\">\r\n      </head>\r\n      <body>\r\n        <div id=\"app\"></div>\r\n      </body>\r\n    </html>`\r\n}\r\n\r\nasync function generateIndexFile(configurator: WebpackConfigurator, nodeModulePath: string | null, template: string) {\r\n  // do not use add-asset-html-webpack-plugin - no need to copy vendor files to output (in dev mode will be served directly, in production copied)\r\n  const assets = await getDllAssets(path.join(configurator.commonDistDirectory, \"renderer-dll\"), configurator)\r\n  const scripts: Array<string> = []\r\n  const css: Array<string> = []\r\n  for (const asset of assets) {\r\n    if (asset.endsWith(\".js\")) {\r\n      scripts.push(`<script type=\"text/javascript\" src=\"${asset}\"></script>`)\r\n    }\r\n    else {\r\n      css.push(`<link rel=\"stylesheet\" href=\"${asset}\">`)\r\n    }\r\n  }\r\n\r\n  const title = await computeTitle(configurator)\r\n  const filePath = path.join(configurator.commonDistDirectory, \".renderer-index-template.html\")\r\n\r\n  let html = template\r\n  if (title) {\r\n    html = html.replace(\"</head>\", `<title>${title}</title></head>`)\r\n  }\r\n\r\n  // if (nodeModulePath) {\r\n  //   html = html.replace(\"</head>\", `<script>require('module').globalPaths.push(\"${nodeModulePath.replace(/\\\\/g, \"/\")}\")</script></head>`)\r\n  // }\r\n\r\n  // html = html.replace(\"</head>\", '<script>require(\"source-map-support/source-map-support.js\").install()</script></head>')\r\n\r\n  if (scripts.length) {\r\n    html = html.replace(\"</head>\", `${scripts.join(\"\")}</head>`)\r\n  }\r\n\r\n  if (css.length) {\r\n    html = html.replace(\"</head>\", `${css.join(\"\")}</head>`)\r\n  }\r\n\r\n  await outputFile(filePath, html)\r\n\r\n  return `!!html-loader?minimize=false&attributes=false!${filePath}`\r\n}\r\n"],"mappings":"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"}
