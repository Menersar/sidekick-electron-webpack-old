{"version":3,"names":["BluebirdPromise","data","_interopRequireWildcard","require","_dotenv","_dotenvExpand","_interopRequireDefault","_fsExtra","_lazyVal","path","_readConfigFile","_deepAssign","_webpackMerge","_config","_ts","_vue","_BaseTarget","_MainTarget","_RendererTarget","_util","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_debug","getAppConfiguration","env","filter","configure","it","getMainConfiguration","getRendererConfiguration","getDllConfiguration","getTestConfiguration","configurator","createConfigurator","testComponents","join","process","cwd","WebpackConfigurator","constructor","type","electronWebpackConfiguration","metadata","electronVersionPromise","Lazy","getInstalledElectronVersion","projectDir","isTest","debug","_configuration","rules","plugins","extensions","_electronVersion","entryFiles","dependencies","devDependencies","isRenderer","startsWith","BABEL_ENV","isProduction","production","NODE_ENV","sourceDir","getSourceDirectory","staticSourceDirectory","commonSourceDirectory","commonDistDirectory","rendererTemplate","renderer","template","config","electronVersion","part","getPartConfiguration","sourceDirectory","result","resolve","main","hasDependency","name","hasDevDependency","getMatchingDevDependencies","options","includes","excludes","Set","keys","some","prefix","entry","context","devtool","externals","computeExternals","node","__dirname","__filename","output","filename","chunkFilename","libraryTarget","target","alias","common","module","value","RendererTarget","BaseRendererTarget","MainTarget","BaseTarget","configureRules","Promise","all","configurePlugins","configureTypescript","configureVue","enabled","JSON","stringify","push","computeEntryFile","mainConfiguration","extraEntries","Array","isArray","p","basename","extname","assign","applyCustomModifications","applyCustom","configPath","customModule","merge","smart","webpackConfig","webpackDllConfig","whiteListedModules","add","concat","exports","schemeDataPromise","readJson","_env","configuration","packageMetadata","getPackageMetadata","electronWebpackConfig","getElectronWebpackConfiguration","deepAssign","validateConfig","message","processEnv","dotEnvPath","dotenvFiles","file","exists","pathExists","dotEnvExpand","dotEnvConfig","srcDir","candidates","ext","getFirstExistingFile","Error","relative","version","e","code"],"sources":["../src/main.ts"],"sourcesContent":["import * as BluebirdPromise from \"bluebird\"\r\nimport { config as dotEnvConfig } from \"dotenv\"\r\nimport dotEnvExpand from \"dotenv-expand\"\r\nimport { pathExists, readJson } from \"fs-extra\"\r\nimport { Lazy } from \"lazy-val\"\r\nimport * as path from \"path\"\r\nimport { validateConfig } from \"read-config-file\"\r\nimport { deepAssign } from \"read-config-file/out/deepAssign\"\r\nimport \"source-map-support/register\"\r\nimport { Configuration, Plugin, RuleSetRule } from \"webpack\"\r\nimport merge from \"webpack-merge\"\r\nimport { getElectronWebpackConfiguration, getPackageMetadata } from \"./config\"\r\nimport { configureTypescript } from \"./configurators/ts\"\r\nimport { configureVue } from \"./configurators/vue/vue\"\r\nimport { ConfigurationEnv, ConfigurationType, ElectronWebpackConfiguration, PackageMetadata, PartConfiguration } from \"./core\"\r\nimport { BaseTarget } from \"./targets/BaseTarget\"\r\nimport { MainTarget } from \"./targets/MainTarget\"\r\nimport { BaseRendererTarget, RendererTarget } from \"./targets/RendererTarget\"\r\nimport { getFirstExistingFile } from \"./util\"\r\n\r\nexport { ElectronWebpackConfiguration } from \"./core\"\r\n\r\nconst _debug = require(\"debug\")\r\n\r\n// noinspection JSUnusedGlobalSymbols\r\nexport function getAppConfiguration(env: ConfigurationEnv) {\r\n  return BluebirdPromise.filter([configure(\"main\", env), configure(\"renderer\", env)], it => it != null)\r\n}\r\n\r\n// noinspection JSUnusedGlobalSymbols\r\nexport function getMainConfiguration(env: ConfigurationEnv) {\r\n  return configure(\"main\", env)\r\n}\r\n\r\n// noinspection JSUnusedGlobalSymbols\r\nexport function getRendererConfiguration(env: ConfigurationEnv) {\r\n  return configure(\"renderer\", env)\r\n}\r\n\r\n// in the future, if need, isRenderer = true arg can be added\r\n// noinspection JSUnusedGlobalSymbols\r\nexport function getDllConfiguration(env: ConfigurationEnv) {\r\n  return configure(\"renderer-dll\", env)\r\n}\r\n\r\n// noinspection JSUnusedGlobalSymbols\r\nexport async function getTestConfiguration(env: ConfigurationEnv) {\r\n  const configurator = await createConfigurator(\"test\", env)\r\n  return await configurator.configure({\r\n    testComponents: path.join(process.cwd(), \"src/renderer/components/testComponents.ts\"),\r\n  })\r\n}\r\n\r\nexport class WebpackConfigurator {\r\n  readonly projectDir: string\r\n\r\n  private electronVersionPromise = new Lazy(() => getInstalledElectronVersion(this.projectDir))\r\n\r\n  readonly isRenderer: boolean\r\n  readonly isProduction: boolean\r\n  readonly isTest = this.type === \"test\"\r\n\r\n  readonly sourceDir: string\r\n  readonly staticSourceDirectory: string\r\n  readonly commonSourceDirectory: string\r\n  readonly commonDistDirectory: string\r\n\r\n  readonly rendererTemplate: string\r\n\r\n  readonly debug = _debug(`electron-webpack:${this.type}`)\r\n\r\n  private _configuration: Configuration | null = null\r\n\r\n  get config(): Configuration {\r\n    return this._configuration!!\r\n  }\r\n\r\n  readonly rules: Array<RuleSetRule> = []\r\n  readonly plugins: Array<Plugin> = []\r\n\r\n  // js must be first - e.g. iView has two files loading-bar.js and loading-bar.vue - when we require \"loading-bar\", js file must be resolved and not vue\r\n  readonly extensions: Array<string> = [\".js\", \".json\", \".node\"]\r\n\r\n  private _electronVersion: string | null = null\r\n\r\n  get electronVersion(): string {\r\n    return this._electronVersion!!\r\n  }\r\n\r\n  readonly entryFiles: Array<string> = []\r\n\r\n  // electronWebpackConfiguration expected to be resolved (use getElectronWebpackConfiguration())\r\n  constructor(readonly type: ConfigurationType, readonly env: ConfigurationEnv, readonly electronWebpackConfiguration: ElectronWebpackConfiguration, readonly metadata: PackageMetadata) {\r\n    if (metadata.dependencies == null) {\r\n      metadata.dependencies = {}\r\n    }\r\n    if (metadata.devDependencies == null) {\r\n      metadata.devDependencies = {}\r\n    }\r\n\r\n    this.projectDir = electronWebpackConfiguration.projectDir!!\r\n    this.isRenderer = type.startsWith(\"renderer\")\r\n    process.env.BABEL_ENV = type\r\n\r\n    this.isProduction = this.env.production == null ? process.env.NODE_ENV === \"production\" : this.env.production\r\n\r\n    this.debug(`isProduction: ${this.isProduction}`)\r\n\r\n    this.sourceDir = this.getSourceDirectory(this.type)!!\r\n\r\n    this.staticSourceDirectory = this.electronWebpackConfiguration.staticSourceDirectory!!\r\n    this.commonSourceDirectory = this.electronWebpackConfiguration.commonSourceDirectory!!\r\n    this.commonDistDirectory = this.electronWebpackConfiguration.commonDistDirectory!!\r\n\r\n    this.rendererTemplate = (this.electronWebpackConfiguration.renderer && this.electronWebpackConfiguration.renderer.template) || \"src/index.ejs\"\r\n  }\r\n\r\n  /**\r\n   * Returns null if code processing for type is disabled.\r\n   */\r\n  getSourceDirectory(type: ConfigurationType): string | null {\r\n    const part = this.getPartConfiguration(type)\r\n    if (part === null || (part != null && part.sourceDirectory === null)) {\r\n      // part or sourceDirectory is explicitly set to null\r\n      return null\r\n    }\r\n\r\n    const result = part == null ? null : part.sourceDirectory\r\n    if (result == null) {\r\n      return path.join(this.projectDir, \"src\", type.startsWith(\"renderer\") || type === \"test\" ? \"renderer\" : type)\r\n    }\r\n    else {\r\n      return path.resolve(this.projectDir, result)\r\n    }\r\n  }\r\n\r\n  getPartConfiguration(type: ConfigurationType): PartConfiguration | null | undefined {\r\n    if (type === \"main\") {\r\n      return this.electronWebpackConfiguration.main\r\n    }\r\n    else {\r\n      return this.electronWebpackConfiguration.renderer\r\n    }\r\n  }\r\n\r\n  hasDependency(name: string) {\r\n    return name in this.metadata.dependencies || this.hasDevDependency(name)\r\n  }\r\n\r\n  hasDevDependency(name: string) {\r\n    return name in this.metadata.devDependencies\r\n  }\r\n\r\n  /**\r\n   * Returns the names of devDependencies that match a given string or regex.\r\n   * If no matching dependencies are found, an empty array is returned.\r\n   *\r\n   * @return list of matching dependency names, e.g. `[\"@babel/preset-react\", \"@babel/preset-stage-0\"]`\r\n   */\r\n  getMatchingDevDependencies(options: GetMatchingDevDependenciesOptions = {}) {\r\n    const includes = options.includes || []\r\n    const excludes = new Set(options.excludes || [])\r\n    return Object.keys(this.metadata.devDependencies)\r\n      .filter(name => !excludes.has(name) && includes.some(prefix => name.startsWith(prefix)))\r\n  }\r\n\r\n  async configure(entry?: { [key: string]: any } | null) {\r\n    // noinspection SpellCheckingInspection\r\n    this._configuration = {\r\n      context: this.projectDir,\r\n      devtool: this.isProduction || this.isTest ? \"nosources-source-map\" : \"eval-source-map\",\r\n      externals: this.computeExternals(),\r\n      node: {\r\n        __dirname: !this.isProduction,\r\n        __filename: !this.isProduction,\r\n      },\r\n      output: {\r\n        filename: \"[name].js\",\r\n        chunkFilename: \"[name].bundle.js\",\r\n        // !!\r\n        libraryTarget: \"commonjs2\",\r\n        // libraryTarget: \"umd\",\r\n        path: path.join(this.commonDistDirectory, this.type)\r\n      },\r\n      target: this.isTest ? \"node\" : `electron-${this.type === \"renderer-dll\" ? \"renderer\" : this.type}` as any,\r\n      resolve: {\r\n        alias: {\r\n          \"@\": this.sourceDir,\r\n          common: this.commonSourceDirectory,\r\n        },\r\n        extensions: this.extensions,\r\n      },\r\n      module: {\r\n        rules: this.rules,\r\n      },\r\n      plugins: this.plugins,\r\n    }\r\n\r\n    if (entry != null) {\r\n      this._configuration.entry = entry\r\n    }\r\n\r\n    // if electronVersion not specified, use latest\r\n    this._electronVersion = this.electronWebpackConfiguration.electronVersion || await this.electronVersionPromise.value || \"3.0.7\"\r\n    const target = (() => {\r\n      switch (this.type) {\r\n        case \"renderer\": return new RendererTarget()\r\n        case \"renderer-dll\": return new BaseRendererTarget()\r\n        case \"test\": return new BaseRendererTarget()\r\n        case \"main\": return new MainTarget()\r\n        default: return new BaseTarget()\r\n      }\r\n    })()\r\n    this.debug(`Target class: ${target.constructor.name}`)\r\n    target.configureRules(this)\r\n    await Promise.all([target.configurePlugins(this), configureTypescript(this)])\r\n    configureVue(this)\r\n\r\n    if (this.debug.enabled) {\r\n      this.debug(`\\n\\n${this.type} config:` + JSON.stringify(this._configuration, null, 2) + \"\\n\\n\")\r\n    }\r\n\r\n    if (this.config.entry == null) {\r\n      this.entryFiles.push((await computeEntryFile(this.sourceDir, this.projectDir))!!)\r\n      this.config.entry = {\r\n        [this.type]: this.entryFiles,\r\n      }\r\n\r\n      const mainConfiguration = this.electronWebpackConfiguration.main || {}\r\n      let extraEntries = mainConfiguration.extraEntries\r\n      if (this.type === \"main\" && extraEntries != null) {\r\n        if (typeof extraEntries === \"string\") {\r\n          extraEntries = [extraEntries]\r\n        }\r\n\r\n        if (Array.isArray(extraEntries)) {\r\n          for (const p of extraEntries) {\r\n            this.config.entry[path.basename(p, path.extname(p))] = p\r\n          }\r\n        }\r\n        else {\r\n          Object.assign(this.config.entry, extraEntries)\r\n        }\r\n      }\r\n    }\r\n\r\n    // noinspection ES6RedundantAwait\r\n    this._configuration = await Promise.resolve(this.applyCustomModifications(this.config))\r\n\r\n    return this.config\r\n  }\r\n\r\n  private applyCustomModifications(config: Configuration): Configuration {\r\n    const { renderer, main } = this.electronWebpackConfiguration\r\n\r\n    const applyCustom = (configPath: string) => {\r\n      const customModule = require(path.join(this.projectDir, configPath))\r\n      if (typeof customModule === \"function\") {\r\n        return customModule(config, this)\r\n      }\r\n      else {\r\n        return merge.smart(config, customModule)\r\n      }\r\n    }\r\n\r\n    if (this.type === \"renderer\" && renderer && renderer.webpackConfig) {\r\n      return applyCustom(renderer.webpackConfig)\r\n    }\r\n    else if (this.type === \"renderer-dll\" && renderer && renderer.webpackDllConfig) {\r\n      return applyCustom(renderer.webpackDllConfig)\r\n    }\r\n    else if (this.type === \"main\" && main && main.webpackConfig) {\r\n      return applyCustom(main.webpackConfig)\r\n    }\r\n    else {\r\n      return config\r\n    }\r\n  }\r\n\r\n  private computeExternals() {\r\n    const whiteListedModules = new Set(this.electronWebpackConfiguration.whiteListedModules || [])\r\n    if (this.isRenderer) {\r\n      whiteListedModules.add(\"react\")\r\n      whiteListedModules.add(\"react-dom\")\r\n      whiteListedModules.add(\"vue\")\r\n    }\r\n\r\n    const filter = (name: string) => !name.startsWith(\"@types/\") && (whiteListedModules == null || !whiteListedModules.has(name))\r\n    const externals: Array<string> = Object.keys(this.metadata.dependencies).filter(filter)\r\n    externals.push(\"electron\")\r\n    externals.push(\"webpack\")\r\n    // because electron-devtools-installer specified in the devDependencies, but required in the index.dev\r\n    externals.push(\"electron-devtools-installer\")\r\n    if (this.type === \"main\") {\r\n      externals.push(\"webpack/hot/log-apply-result\")\r\n      // externals.push(\"electron-webpack/out/electron-main-hmr/HmrClient\")\r\n      externals.push(\"sidekick-electron-webpack/out/electron-main-hmr/HmrClient\")\r\n      externals.push(\"source-map-support/source-map-support.js\")\r\n    }\r\n\r\n    if (this.electronWebpackConfiguration.externals != null) {\r\n      return externals.concat(this.electronWebpackConfiguration.externals)\r\n    }\r\n\r\n    return externals\r\n  }\r\n}\r\n\r\nconst schemeDataPromise = new Lazy(() => readJson(path.join(__dirname, \"..\", \"scheme.json\")))\r\n\r\nexport async function createConfigurator(type: ConfigurationType, env: ConfigurationEnv | null) {\r\n  if (env != null) {\r\n    // allow to pass as `--env.autoClean=false` webpack arg\r\n    const _env: any = env\r\n    for (const name of [\"minify\", \"autoClean\", \"production\"]) {\r\n      if (_env[name] === \"true\") {\r\n        _env[name] = true\r\n      }\r\n      else if (_env[name] === \"false\") {\r\n        _env[name] = false\r\n      }\r\n    }\r\n  }\r\n\r\n  if (env == null) {\r\n    env = {}\r\n  }\r\n\r\n  const projectDir = (env.configuration || {}).projectDir || process.cwd()\r\n  const packageMetadata = getPackageMetadata(projectDir)\r\n  const electronWebpackConfig = await getElectronWebpackConfiguration({\r\n    packageMetadata,\r\n    projectDir,\r\n  })\r\n  if (env.configuration != null) {\r\n    deepAssign(electronWebpackConfig, env.configuration)\r\n  }\r\n\r\n  await validateConfig(electronWebpackConfig, schemeDataPromise, message => {\r\n    return `${message}\r\n\r\nHow to fix:\r\n1. Open https://webpack.electron.build/configuration\r\n2. Search the option name on the page.\r\n  * Not found? The option was deprecated or not exists (check spelling).\r\n  * Found? Check that the option in the appropriate place. e.g. \"sourceDirectory\" only in the \"main\" or \"renderer\", not in the root.\r\n`\r\n  })\r\n  return new WebpackConfigurator(type, env, electronWebpackConfig, await packageMetadata.value)\r\n}\r\n\r\nexport async function configure(type: ConfigurationType, env: ConfigurationEnv | null): Promise<Configuration | null> {\r\n  const configurator = await createConfigurator(type, env)\r\n  const sourceDir = configurator.sourceDir\r\n  // explicitly set to null - do not handle at all and do not show info message\r\n  if (sourceDir === null) {\r\n    return null\r\n  }\r\n\r\n  const processEnv = configurator.isProduction ? \"production\" : \"development\"\r\n  const dotEnvPath = path.resolve(configurator.projectDir, \".env\")\r\n  const dotenvFiles = [\r\n    `${dotEnvPath}.${processEnv}.local`,\r\n    `${dotEnvPath}.${processEnv}`,\r\n    `${dotEnvPath}.local`,\r\n    dotEnvPath,\r\n  ]\r\n\r\n  for (const file of dotenvFiles) {\r\n    const exists = await pathExists(file)\r\n    if (exists) {\r\n      dotEnvExpand(\r\n        dotEnvConfig({\r\n          path: file\r\n        })\r\n      )\r\n    }\r\n  }\r\n  return await configurator.configure()\r\n}\r\n\r\nasync function computeEntryFile(srcDir: string, projectDir: string): Promise<string | null> {\r\n  const candidates: Array<string> = []\r\n  for (const ext of [\"ts\", \"js\", \"tsx\", \"jsx\"]) {\r\n    for (const name of [\"index\", \"main\", \"app\"]) {\r\n      candidates.push(`${name}.${ext}`)\r\n    }\r\n  }\r\n\r\n  const file = await getFirstExistingFile(candidates, srcDir)\r\n  if (file == null) {\r\n    throw new Error(`Cannot find entry file ${path.relative(projectDir, path.join(srcDir, \"index.ts\"))} (or main.ts, or app.ts, or index.js, or main.js, or app.js)`)\r\n  }\r\n  return file\r\n}\r\n\r\nasync function getInstalledElectronVersion(projectDir: string) {\r\n  for (const name of [\"electron\", \"electron-prebuilt\", \"electron-prebuilt-compile\"]) {\r\n    try {\r\n      return (await readJson(path.join(projectDir, \"node_modules\", name, \"package.json\"))).version\r\n    }\r\n    catch (e) {\r\n      if (e.code !== \"ENOENT\") {\r\n        throw e\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport interface GetMatchingDevDependenciesOptions {\r\n  /**\r\n   * The list of prefixes to include, e.g. `[\"babel-preset-\"]`.\r\n   */\r\n  includes?: Array<string>\r\n  /**\r\n   * The list of names to exclude.\r\n   */\r\n  excludes?: Array<string>\r\n}\r\n"],"mappings":"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"}
